<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Power.Lab</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main/index.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/pages/productos.css') }}">
    <!-- Cargar íconos de Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
    <header class="Encabezado">
        <div class="Titulo-container">
            <a href="{{ url_for('index') }}" class="Boton-Inicio">
                <h1 class="Titulo-header">Power.Lab</h1>
                <i class="fas fa-dumbbell" style="color: #d2cfcf; font-size: 48px;"></i>
            </a>
        </div>
        <nav class="Menu-links">
            <a href="{{ url_for('perfil') }}">PERFIL</a>
            <a href="{{ url_for('productos') }}">PRODUCTOS</a>
            <a href="{{ url_for('productos') }}">DESCUENTOS</a>
            <a href="{{ url_for('mis_compras') }}">MIS COMPRAS</a>
        </nav>
        {% if session.get("user_id") %}
            <span class="Inicio-sesion">
                {% if session.get("user_tipo") == "admin" %}
                    ADMIN: Hola {{ session.get("user_nombre") }}
                {% else %}
                    Hola {{ session.get("user_nombre") }}
                {% endif %}
                   <a href="{{ url_for('logout') }}" style="color: inherit; text-decoration: underline;">Logout</a>
            </span>
            {% else %}
                <a href="{{ url_for('login_get') }}" class="Inicio-sesion">
                    Iniciar sesión/<br>Registrarse
                </a>
            {% endif %}
        <a href="{{ url_for('carrito') }}" class="Boton-carrito">
            <i class="fa-solid fa-cart-shopping"></i>
            <span class="Contador">0</span>
        </a>
    </header>

    <div class="Separador-1">
        <p class="Txt-Separador-1">
            PRODUCTOS
        </p>
    </div>

    <div class="Slate-1">

        <div class="Filtro">
            <label for="Categorias">Categorias</label>
            <select id="Categorias" name="Categorias">
                <option value="">Todos</option>
                <option value="proteina">Proteína</option>
                <option value="creatina">Creatina</option>
                <option value="preentreno">Pre-entreno</option>
                <option value="energia">Energía</option>
                <option value="preparacion_peso">Preparación y Ganador de Peso</option>
                <option value="recetas">Recetas</option>
            </select>

            <label for="Marcas">Marcas</label>
            <select id="Marcas" name="Marcas">
                <option value="Todas">Todas</option>
                <option value="Ena">Ena</option>
                <option value="Star">Star Nutrition</option>
                <option value="Granger">Granger</option>
            </select>

            <label for="Sabores">Sabores</label>
            <select name="Sabores" id="Sabores">
                <option value="">Todas</option>
                <option value="chocolate">Chocolate</option>
                <option value="vainilla">Vainilla</option>
                <option value="cookiescream">Cookies & Cream</option>
                <option value="strawberry">Strawberry</option>
                <option value="neutro">Neutro</option>
                <option value="fruitpunch">Fruit Punch</option>
                <option value="citrus">Citrus</option>
                <option value="uva">Uva</option>
                <option value="lemonade">Lemonade</option>
            </select>
        </div>

        <div class="Catalogo">
            {% if productos and productos|length > 0 %}
                {% for p in productos %}
                    <div class="Producto">
                        <div class="Imagen">
                            {% set img = (p[6] or "") %}
                            {% if img.startswith("http") %}
                                <img src="{{ img }}" alt="{{ p[1] }}">
                            {% else %}
                                <img src="{{ url_for('static', filename='img/productos/' ~ img) }}" alt="{{ p[1] }}">
                            {% endif %}
                        </div>

                        <p class="Txt">
                            {{ p[1] }} <br>
                            Precio: ${{ p[4] }} <br>

                            {% if p[5] and p[5] > 0 %}
                                En stock
                            {% else %}
                                Sin stock
                            {% endif %}
                        </p>

                        <a href="{{ url_for('item', id_producto=p[0]) }}" class="Boton-compra">Comprar</a>
                    </div>
                {% endfor %}
            {% else %}
                <p style="color:white;">No hay productos para mostrar.</p>
            {% endif %}
        </div>
    </div>

    <footer class="Pie-pagina">
        <div class="Slogan">
            <p>
                <span class="Resaltado-slogan">Power.Lab</span><br>
                Suplementación<br><br>
                Somos personas normales como tú,<br>
                que nos gusta el deporte y el gimnasio<br>
                y queremos ayudarte a mejorar.
            </p>
        </div>
        <div class="ANMAT">
            <p>
                Productos regulados y verificados por la <span class="Resaltado-ANMAT">ANMAT</span>,<br> cumpliendo
                requisitos de seguridad, calidad y registro.
            </p>
        </div>
        <div class="Metodos-pago">
            <i class="fab fa-cc-visa"></i>
            <i class="fab fa-cc-mastercard"></i>
            <img src="{{ url_for('static', filename='img/logos/mercadopago.png') }}" alt="Mercado Pago">
        </div>
    </footer>
</body>
</html>