<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Power.Lab</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main/index.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/pages/item.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
  <header class="Encabezado">
    <div class="Titulo-container">
      <a href="{{ url_for('index') }}" class="Boton-Inicio">
        <h1 class="Titulo-header">Power.Lab</h1>
        <i class="fas fa-dumbbell" style="color: #d2cfcf; font-size: 48px;"></i>
      </a>
    </div>

    <nav class="Menu-links">
      <a href="{{ url_for('perfil') }}">PERFIL</a>
      <a href="{{ url_for('productos') }}">PRODUCTOS</a>
      <a href="{{ url_for('productos') }}">DESCUENTOS</a>
      <a href="{{ url_for('mis_compras') }}">MIS COMPRAS</a>
    </nav>

    {% if session.get("user_id") %}
      <span class="Inicio-sesion">
        {% if session.get("user_tipo") == "admin" %}
          ADMIN: Hola {{ session.get("user_nombre") }}
        {% else %}
          Hola {{ session.get("user_nombre") }}
        {% endif %}
        <a href="{{ url_for('logout') }}" style="color: inherit; text-decoration: underline; margin-left: 8px;">Logout</a>
      </span>
    {% else %}
      <a href="{{ url_for('login_get') }}" class="Inicio-sesion">
        Iniciar sesión/<br>Registrarse
      </a>
    {% endif %}

    <a href="{{ url_for('carrito') }}" class="Boton-carrito">
      <i class="fa-solid fa-cart-shopping"></i>
      <span class="Contador" id="cartCount">0</span>
    </a>
  </header>

  <div class="Slate-1">
    <div class="Imagenes">
      {% set img = (p[6] or "") %}
      {% if img.startswith("http") %}
        <img src="{{ img }}" alt="{{ p[1] }}">
      {% else %}
        <img src="{{ url_for('static', filename='img/productos/' ~ img) }}" alt="{{ p[1] }}">
      {% endif %}
    </div>

    <div class="Detalles">
      <h2>{{ p[1] }}</h2>

      <p class="Txt-Detalles">
        Precio: ${{ p[4] }} / Envío: $3000
      </p>

      <label for="Sabores">Sabores:</label>
      <select id="Sabores" name="sabor">
        <option value="">Seleccionar</option>

        {% if sabores and sabores|length > 0 %}
          {% for s in sabores %}
            <option value="{{ s }}" {% if sabor_sel and s.lower()==sabor_sel.lower() %}selected{% endif %}>
              {{ s }}
            </option>
          {% endfor %}
        {% else %}
          <option value="">Sin sabores</option>
        {% endif %}
      </select>

      <p id="error-sabor" style="color: red; font-size: 14px;"></p>

      <p class="Txt-Detalles">
        Descripción: <br><br>
        {{ p[3] }}
      </p>

      <button id="btnAddCart" type="button" data-id="{{ p[0] }}">Agregar al Carrito</button>
    </div>
  </div>

  <footer class="Pie-pagina">
    <div class="Slogan">
      <p>
        <span class="Resaltado-slogan">Power.Lab</span><br>
        Suplementación<br><br>
        Somos personas normales como tú,<br>
        que nos gusta el deporte y el gimnasio<br>
        y queremos ayudarte a mejorar.
      </p>
    </div>
    <div class="ANMAT">
      <p>
        Productos regulados y verificados por la <span class="Resaltado-ANMAT">ANMAT</span>,<br>
        cumpliendo requisitos de seguridad, calidad y registro.
      </p>
    </div>
    <div class="Metodos-pago">
      <i class="fab fa-cc-visa"></i>
      <i class="fab fa-cc-mastercard"></i>
      <img src="{{ url_for('static', filename='img/logos/mercadopago.png') }}" alt="Mercado Pago">
    </div>
  </footer>

  <script src="{{ url_for('static', filename='js/item.js') }}"></script>
</body>
</html>